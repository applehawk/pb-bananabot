# ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–∏

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç —á–µ–∫-–ª–∏—Å—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ–Ω–æ—Å–∞ Telegraf –∫–æ–¥–∞ –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é –ø–∞–ø–∫—É.

## üìã –ß–µ–∫-–ª–∏—Å—Ç —Ñ–∞–π–ª–æ–≤

### Telegraf —Ñ–∞–π–ª—ã –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã

- [x] `src/telegraf/bot.module.ts`
- [x] `src/telegraf/bot.service.ts`
- [x] `src/telegraf/bot.update.ts`
- [x] `src/telegraf/bot.controller.ts`
- [x] `src/telegraf/scenes/*.scene.ts` (–≤—Å–µ —Å—Ü–µ–Ω—ã)
- [x] `src/telegraf/abstract/abstract.scene.ts`
- [x] `src/telegraf/interfaces/context.interface.ts`
- [x] `src/telegraf/constants/buttons.const.ts`
- [x] `src/telegraf/constants/scenes.const.ts`
- [x] `src/telegraf/constants/bot-name.const.ts`
- [x] `src/telegraf/middlewares/command-args.middleware.ts`

### Entry points —Å–æ–∑–¥–∞–Ω—ã

- [x] `src/main-telegraf.ts` - —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è Telegraf
- [x] `src/main-grammy.ts` - —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è grammY
- [x] `src/main.ts` - –æ—Å—Ç–∞–ª—Å—è –∫–∞–∫ default

### package.json –æ–±–Ω–æ–≤–ª—ë–Ω

- [x] –î–æ–±–∞–≤–ª–µ–Ω—ã grammY –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- [x] –î–æ–±–∞–≤–ª–µ–Ω—ã —Å–∫—Ä–∏–ø—Ç—ã `start:telegraf:*`
- [x] –î–æ–±–∞–≤–ª–µ–Ω—ã —Å–∫—Ä–∏–ø—Ç—ã `start:grammy:*`
- [x] –î–æ–±–∞–≤–ª–µ–Ω—ã —Å–∫—Ä–∏–ø—Ç—ã `start:migrate:telegraf:prod`
- [x] –î–æ–±–∞–≤–ª–µ–Ω—ã —Å–∫—Ä–∏–ø—Ç—ã `start:migrate:grammy:prod`

### –ò–º–ø–æ—Ä—Ç—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã

- [x] `src/telegraf/bot.module.ts` - –ø—É—Ç–∏ –∫ shared –º–æ–¥—É–ª—è–º
- [x] `src/telegraf/bot.service.ts` - –ø—É—Ç–∏ –∫ shared –º–æ–¥—É–ª—è–º
- [x] `src/telegraf/bot.update.ts` - –ø—É—Ç–∏ –∫ shared –º–æ–¥—É–ª—è–º
- [x] `src/telegraf/constants/*.ts` - –ø—É—Ç–∏ –∫ enum
- [x] `src/telegraf/scenes/*.ts` - –ø—É—Ç–∏ –∫ shared –º–æ–¥—É–ª—è–º

## üß™ –¢–µ—Å—Ç—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏

### 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–º–ø–æ—Ä—Ç–æ–≤ Telegraf

```bash
# Telegraf —Ñ–∞–π–ª—ã –ù–ï –¥–æ–ª–∂–Ω—ã –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑ './xxx' (–∫—Ä–æ–º–µ –ª–æ–∫–∞–ª—å–Ω—ã—Ö)
grep -r "from '\.\/" src/telegraf/ | grep -v "from '\./interfaces" | grep -v "from '\./constants" | grep -v "from '\./abstract" | grep -v "from '\./middlewares"
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: –ü—É—Å—Ç–æ–π –≤—ã–≤–æ–¥ (–≤—Å–µ –∏–º–ø–æ—Ä—Ç—ã –∏–¥—É—Ç —á–µ—Ä–µ–∑ `../`)

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–º–ø–æ—Ä—Ç–æ–≤ grammY

```bash
# grammY —Ñ–∞–π–ª—ã –ù–ï –¥–æ–ª–∂–Ω—ã –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑ telegraf
grep -r "from '.*telegraf" src/grammy/
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: –¢–æ–ª—å–∫–æ –∏–º–ø–æ—Ä—Ç –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ telegraf (–ù–ï –∏–∑ src/telegraf/)

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π

```bash
# –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –≤—Å–µ—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
ls -d src/telegraf src/grammy src/telegraf/scenes src/grammy/conversations
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: –í—Å–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —Å—É—â–µ—Å—Ç–≤—É—é—Ç

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ entry points

```bash
# –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –≤—Å–µ entry points –∏–º–ø–æ—Ä—Ç–∏—Ä—É—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏
grep "from '.*/bot.module'" src/main*.ts
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**:
```
src/main-telegraf.ts:import { BotModule } from './telegraf/bot.module';
src/main-grammy.ts:import { BotModule } from './grammy/bot.module';
```

### 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ scenes

```bash
# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ scenes
ls -1 src/telegraf/scenes/*.ts | wc -l
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: 11 —Ñ–∞–π–ª–æ–≤ (–≤—Å–µ —Å—Ü–µ–Ω—ã)

### 6. –ü—Ä–æ–≤–µ—Ä–∫–∞ conversations

```bash
# –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ conversations
ls -1 src/grammy/conversations/*.ts | wc -l
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: 12 —Ñ–∞–π–ª–æ–≤ (conversations + registry + base)

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏

### –ö–æ–º–ø–∏–ª—è—Ü–∏—è Telegraf

```bash
npm run build
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: –°–±–æ—Ä–∫–∞ –ø—Ä–æ—Ö–æ–¥–∏—Ç —É—Å–ø–µ—à–Ω–æ (–º–æ–∂–µ—Ç –±—ã—Ç—å warning, –Ω–æ –Ω–µ errors)

### –ü—Ä–æ–≤–µ—Ä–∫–∞ TypeScript

```bash
npx tsc --noEmit
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: –ù–µ—Ç –æ—à–∏–±–æ–∫ —Ç–∏–ø–∏–∑–∞—Ü–∏–∏

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–¥–µ–Ω—Ç–∏—á–Ω–æ—Å—Ç–∏ constants

```bash
# Buttons –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏ (–∫—Ä–æ–º–µ —Ñ–æ—Ä–º–∞—Ç–∞)
diff -u <(grep "CommandEnum\." src/telegraf/constants/buttons.const.ts | sort) <(grep "CommandEnum\." src/grammy/constants/buttons.const.ts | sort)
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: –í—Å–µ CommandEnum –∑–Ω–∞—á–µ–Ω–∏—è —Å–æ–≤–ø–∞–¥–∞—é—Ç

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –≤—Å–µ—Ö —Å—Ü–µ–Ω

```bash
# –°–ø–∏—Å–æ–∫ —Å—Ü–µ–Ω Telegraf
ls -1 src/telegraf/scenes/*.ts | sed 's/.*\///' | sed 's/.scene.ts//' | sort > /tmp/telegraf-scenes.txt

# –°–ø–∏—Å–æ–∫ conversations grammY
ls -1 src/grammy/conversations/*.ts | sed 's/.*\///' | sed 's/.conversation.ts//' | sort | grep -v "base\|conversations-registry" > /tmp/grammy-conversations.txt

# –°—Ä–∞–≤–Ω–∏–≤–∞–µ–º
diff /tmp/telegraf-scenes.txt /tmp/grammy-conversations.txt
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—Ü–µ–Ω—ã –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤ –æ–±–µ–∏—Ö –≤–µ—Ä—Å–∏—è—Ö

## ‚úÖ –ò—Ç–æ–≥–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

### –ó–∞–ø—É—Å–∫ Telegraf –≤–µ—Ä—Å–∏–∏

```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ .env –Ω–∞—Å—Ç—Ä–æ–µ–Ω
npm run start:telegraf:dev
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**:
- –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- –õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç "ü§ñ BananaBot (Telegraf) running on port XXX"

### –ó–∞–ø—É—Å–∫ grammY –≤–µ—Ä—Å–∏–∏

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–µ–¥—ã–¥—É—â–∏–π –ø—Ä–æ—Ü–µ—Å—Å, –∑–∞—Ç–µ–º:
npm run start:grammy:dev
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**:
- –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- –õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç "üöÄ BananaBot (grammY) running on port XXX"

## üéØ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –∫–∞–∂–¥–æ–π –≤–µ—Ä—Å–∏–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ Telegram:

1. **–ö–æ–º–∞–Ω–¥–∞ /start**
   - –î–æ–ª–∂–Ω–∞ –ø–æ–∫–∞–∑–∞—Ç—å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
   - –ö–Ω–æ–ø–∫–∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Outline

2. **–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é**
   - –ö–Ω–æ–ø–∫–∏: –°—Ç–∞—Ç—É—Å, –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è, –ö—É–ø–∏—Ç—å, –ü–æ–º–æ—â—å

3. **–°—Ü–µ–Ω–∞ Get Access**
   - –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–∞—Ä–∏—Ñ—ã
   - –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç —Ç–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å

4. **Admin –∫–æ–º–∞–Ω–¥—ã** (–µ—Å–ª–∏ –≤—ã –∞–¥–º–∏–Ω)
   - `/tariff <name> <price>`
   - `/up <username> <amount>`

## üìù –†–µ–∑—É–ª—å—Ç–∞—Ç

–ï—Å–ª–∏ –≤—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–æ–π–¥–µ–Ω—ã:
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –û–±–µ –≤–µ—Ä—Å–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ
- ‚úÖ –ú–æ–∂–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É –Ω–∏–º–∏

–ï—Å–ª–∏ –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—à–∏–±–∫–∏ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã: `npm install`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç–∏ –∏–º–ø–æ—Ä—Ç–æ–≤
- –°–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ

---

**–î–∞—Ç–∞ –º–∏–≥—Ä–∞—Ü–∏–∏**: 2025-10-20
**–í–µ—Ä—Å–∏–∏**: Telegraf 4.15.3, grammY 1.21.1
**NestJS**: 10.x
